(this["webpackJsonppoker-payment"]=this["webpackJsonppoker-payment"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),s=a.n(o),c=a(46),i=a(47),l=a(53),u=a(52),d=a(36),b=a.n(d),j=a(66),h=a.n(j),p=a(67),m=a.n(p),y=a(78),O=a(136),x=a(5),v=Object(O.a)({myDropZone:{background:"#f1f1f1",borderColor:"#04957D",minHeight:"200px",borderWidth:"1px",borderStyle:"dashed"},myDropZoneText:{fontSize:"20px",paddingLeft:"2.5%",paddingRight:"2.5%",marginTop:"10%"}});function f(e){var t=v();return Object(x.jsx)("div",{className:m.a.DropzoneAreaContainer,children:Object(x.jsx)(y.a,{onChange:e.handleFileChange,dropzoneText:"Select a PokerNow CSV, DonkHouse CSV, or enter details in the form",filesLimit:10,showPreviewsInDropzone:!1,useChipsForPreview:!0,dropzoneClass:t.myDropZone,dropzoneParagraphClass:t.myDropZoneText})})}var _=a(42),N=a.n(_),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=[],t=this.props.data.playerNets;for(var a in t)e.push(Object(x.jsxs)("div",{className:N.a.TextRow,children:[a," nets out ",t[a]]},a));e.push(Object(x.jsx)("div",{className:N.a.TextRow,children:"------------"},"spacingBoi"));var n=this.props.data.payouts;if(n.length>0)for(var r=0;r<n.length;r++)e.push(Object(x.jsxs)("div",{className:N.a.TextRow,children:[n[r].Loser," pays ",n[r].Winner," $",n[r].Amount]},r));return Object(x.jsx)("div",{id:"ResultsTable",className:N.a.ResultsTable,children:e})}}]),a}(r.a.Component),C=a(50),F=a(55),T=a(63),k=a(31),D=a(15),w=a.n(D);function A(e){var t=Object(n.useState)([{name:"Lost69",net:-69},{name:"Won68",buyin:1,buyout:69},{name:"Won1",buyin:420,buyout:421}]),a=Object(k.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(!0),c=Object(k.a)(s,2),i=c[0],l=c[1],u=Object(n.useState)({name:"",buyin:"",buyout:""}),d=Object(k.a)(u,2),b=d[0],j=d[1],h=function(e){j(Object(F.a)(Object(F.a)({},b),{},Object(C.a)({},e.target.name,e.target.value)))},p=function(e){var t=r;t.splice(e.target.id,1),o(Object(T.a)(t))};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("table",{className:w.a.DataTable,children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:w.a.TableHead,children:[Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Buy-in"}),Object(x.jsx)("th",{children:"Buy-out"}),Object(x.jsx)("th",{children:"Net"}),Object(x.jsx)("th",{children:"Action"})]})}),Object(x.jsx)("tbody",{children:r.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:w.a.TableName,children:e.name}),Object(x.jsx)("td",{className:w.a.TableNumber,children:e.buyin}),Object(x.jsx)("td",{className:w.a.TableNumber,children:e.buyout}),Object(x.jsx)("td",{className:w.a.TableNumber,children:e.net}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{className:w.a.deleteRow,onClick:p,id:t,children:"Delete"})})]})}))})]}),i?Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:w.a.PeopleAdd,children:[Object(x.jsx)("input",{placeholder:"Name",onChange:h,value:b.name,name:"name",className:w.a.InputBox}),Object(x.jsx)("input",{placeholder:"Buy-in",onChange:h,value:b.buyin,name:"buyin",className:w.a.InputBox}),Object(x.jsx)("input",{placeholder:"Buy-out",onChange:h,value:b.buyout,name:"buyout",className:w.a.InputBox}),Object(x.jsx)("input",{placeholder:"Net",onChange:h,value:b.net,name:"net",className:w.a.InputBox})]}),Object(x.jsx)("button",{onClick:function(){o([].concat(Object(T.a)(r),[Object(F.a)({},b)])),j({name:"",buyin:"",buyout:""}),l(!1)},className:w.a.addButton,children:"Add Person"})]}):Object(x.jsx)("button",{onClick:function(){return l(!i)},className:w.a.addButton,children:"Add Row"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(t){e.handleFormEntry(r)},className:w.a.submitForm,children:"Submit!"})})]})}var B=a(62),E=function(e,t,a){var n={};"PokerNow"===t?n=function(e){for(var t=e.data,a={},n=0;n<t.length;n++){var r=t[n];if(Object.keys(r).length>1){var o="".concat(r.player_nickname," (").concat(r.player_id,")");o in a||(a[o]=0),a[o]+=parseFloat(r.net)}}return a}(e):"FormEntry"===t?n=function(e){for(var t={},a=0;a<e.length;a++){var n=e[a],r=n.name,o=void 0;o=n.net?parseFloat(n.net):parseFloat(n.buyout)-parseFloat(n.buyin),r in t||(t[r]=0),t[r]+=o}return t}(e):"DonkHouse"===t&&(n=function(e){for(var t=e.data,a={},n=1;n<t.length;n++){var r=t[n],o=r[Object.keys(r)[0]];if(""===o||"End time:"===o)return a;var s=r.__parsed_extra,c=Object(k.a)(s,5),i=(c[0],c[1],c[2]),l=(c[3],c[4]);a[l.length>0&&"None provided"!==l?l:o]=parseFloat(i)}return a}(e));for(var r=0,o=Object.keys(a);r<o.length;r++){var s=o[r];s in n?n[s]+=a[s]:n[s]=a[s]}return n},S=function(e,t){var a=function(e){if(Array.isArray(e))return"FormEntry";if("object"===typeof e){var t=e.data[0];if(Object.keys(t).some((function(e){return/Most recent sessions as of/.test(e)})))return"DonkHouse";if("buy_in"in t&&"buy_out"in t&&"net"in t&&"player_id"in t&&"player_nickname"in t&&"session_end_at"in t&&"session_start_at"in t&&"stack"in t)return"PokerNow"}alert("Invalid data source - check that the file is the original export!")}(e);return function(e,t){for(var a=[],n=[],r=0,o=0,s=Object.keys(e);o<s.length;o++){var c=s[o],i=c,l=e[c],u=[i,l];l<0?a.push(u):n.push(u),r+=l}if(0!==r)return alert("Net total is off by ".concat(r)),{payouts:[{"Double check your balance!":69}],playerNets:{"Things aren't adding up here!":420}};var d=new B.a((function(e,t){return e[1]-t[1]}));d.init(a);var b=new B.a((function(e,t){return t[1]-e[1]}));b.init(n);for(var j=[];d.size()>0&&b.size()>0;){var h={Winner:"",Loser:"",Amount:""},p=d.poll(),m=b.poll();h.Winner=m[0],h.Loser=p[0];var y=m[1]+p[1];y<0&&(h.Amount=m[1],d.add([p[0],y])),y>0?(h.Amount=-p[1],b.add([m[0],y])):h.Amount=m[1],j.push(h)}return{payouts:j,playerNets:e}}(E(e,a,t))},P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n.handleFileChange=function(e){e.length>0&&h.a.parse(e[0],{header:!0,complete:function(e){var t=S(e,n.state.processedData.playerNets);n.setState({processedData:t})}})},n.handleFormEntry=function(e){n.setState({processedData:{payouts:[],playerNets:{}}},(function(){var t=S(e,this.state.processedData.playerNets);this.setState({processedData:t})}))},n.state={processedData:{payouts:[],playerNets:{}}},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:b.a.Body,children:[Object(x.jsx)("h1",{children:"Poker Payment"}),Object(x.jsx)("div",{className:b.a.SubmitContainer,children:Object(x.jsx)(f,{handleFileChange:this.handleFileChange})}),Object(x.jsx)("div",{className:b.a.TableContainer,children:Object(x.jsx)(A,{handleFormEntry:this.handleFormEntry})}),Object(x.jsx)("h2",{children:"Payments"}),Object(x.jsx)("div",{className:b.a.ResultsTable,children:Object(x.jsx)(g,{data:this.state.processedData})})]})}}]),a}(r.a.Component);s.a.render(Object(x.jsx)(P,{}),document.getElementById("root"))},15:function(e,t,a){e.exports={DataTable:"FormEntry_DataTable__1_ytq",TableHead:"FormEntry_TableHead__3ahv6",TableNumber:"FormEntry_TableNumber__3V3Oy",TableName:"FormEntry_TableName__2GlTS",InputBox:"FormEntry_InputBox__2GI1Y",addButton:"FormEntry_addButton__3RZPx",deleteRow:"FormEntry_deleteRow__3qx7X",submitForm:"FormEntry_submitForm__2El8v",PeopleAdd:"FormEntry_PeopleAdd__2wRm_"}},36:function(e,t,a){e.exports={SubmitContainer:"App_SubmitContainer__1B5DM",TableContainer:"App_TableContainer__2b5u9"}},42:function(e,t,a){},67:function(e,t,a){e.exports={DropzoneAreaContainer:"FileSubmit_DropzoneAreaContainer__3mwDz"}}},[[104,1,2]]]);
//# sourceMappingURL=main.036fdeef.chunk.js.map