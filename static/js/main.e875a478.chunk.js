(this["webpackJsonppoker-payment"]=this["webpackJsonppoker-payment"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),s=n.n(o),i=n(46),c=n(47),l=n(53),u=n(52),d=n(36),b=n.n(d),j=n(66),m=n.n(j),h=n(67),p=n.n(h),y=n(78),O=n(136),x=n(5),v=Object(O.a)({myDropZone:{background:"#f1f1f1",borderColor:"#04957D",minHeight:"200px",borderWidth:"1px",borderStyle:"dashed"},myDropZoneText:{fontSize:"20px",paddingLeft:"2.5%",paddingRight:"2.5%",marginTop:"10%"}});function f(e){var t=v();return Object(x.jsx)("div",{className:p.a.DropzoneAreaContainer,children:Object(x.jsx)(y.a,{onChange:e.handleFileChange,dropzoneText:"Select a PokerNow CSV, DonkHouse CSV, or enter details in the form",filesLimit:1,showPreviewsInDropzone:!0,useChipsForPreview:!0,dropzoneClass:t.myDropZone,dropzoneParagraphClass:t.myDropZoneText})})}var _=n(42),N=n.n(_),g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=[],t=this.props.data.playerNets;for(var n in t)e.push(Object(x.jsxs)("div",{className:N.a.TextRow,children:[n," nets out $",t[n]]},n));e.push(Object(x.jsx)("div",{className:N.a.TextRow,children:"-------"},"spacingBoi"));for(var a=this.props.data.payouts,r=0;r<a.length;r++)e.push(Object(x.jsxs)("div",{className:N.a.TextRow,children:[a[r].Loser," pays ",a[r].Winner," $",a[r].Amount]},r));return Object(x.jsx)("div",{id:"ResultsTable",className:N.a.ResultsTable,children:e})}}]),n}(r.a.Component),C=n(50),F=n(55),T=n(63),k=n(31),D=n(15),A=n.n(D);function w(e){var t=Object(a.useState)([{name:"Lost69",net:-69},{name:"Won68",buyin:1,buyout:69},{name:"Won1",buyin:420,buyout:421}]),n=Object(k.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(!0),i=Object(k.a)(s,2),c=i[0],l=i[1],u=Object(a.useState)({name:"",buyin:"",buyout:""}),d=Object(k.a)(u,2),b=d[0],j=d[1],m=function(e){j(Object(F.a)(Object(F.a)({},b),{},Object(C.a)({},e.target.name,e.target.value)))},h=function(e){var t=r;t.splice(e.target.id,1),o(Object(T.a)(t))};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("table",{className:A.a.DataTable,children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:A.a.TableHead,children:[Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Buy-in"}),Object(x.jsx)("th",{children:"Buy-out"}),Object(x.jsx)("th",{children:"Net"}),Object(x.jsx)("th",{children:"Action"})]})}),Object(x.jsx)("tbody",{children:r.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:A.a.TableName,children:e.name}),Object(x.jsx)("td",{className:A.a.TableNumber,children:e.buyin}),Object(x.jsx)("td",{className:A.a.TableNumber,children:e.buyout}),Object(x.jsx)("td",{className:A.a.TableNumber,children:e.net}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{className:A.a.deleteRow,onClick:h,id:t,children:"Delete"})})]})}))})]}),c?Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:A.a.PeopleAdd,children:[Object(x.jsx)("input",{placeholder:"Name",onChange:m,value:b.name,name:"name",className:A.a.InputBox}),Object(x.jsx)("input",{placeholder:"Buy-in",onChange:m,value:b.buyin,name:"buyin",className:A.a.InputBox}),Object(x.jsx)("input",{placeholder:"Buy-out",onChange:m,value:b.buyout,name:"buyout",className:A.a.InputBox}),Object(x.jsx)("input",{placeholder:"Net",onChange:m,value:b.net,name:"net",className:A.a.InputBox})]}),Object(x.jsx)("button",{onClick:function(){o([].concat(Object(T.a)(r),[Object(F.a)({},b)])),j({name:"",buyin:"",buyout:""}),l(!1)},className:A.a.addButton,children:"Add Person"})]}):Object(x.jsx)("button",{onClick:function(){return l(!c)},className:A.a.addButton,children:"Add Row"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(t){e.handleFormEntry(r)},className:A.a.submitForm,children:"Submit!"})})]})}var B=n(62),E=function(e,t){var n={};"PokerNow"===t?n=function(e){for(var t=e.data,n={},a=0;a<t.length;a++){var r=t[a];if(Object.keys(r).length>1){var o="".concat(r.player_nickname," (").concat(r.player_id,")");o in n||(n[o]=0),n[o]+=parseFloat(r.net)}}return n}(e):"FormEntry"===t?n=function(e){for(var t={},n=0;n<e.length;n++){var a=e[n],r=a.name,o=void 0;o=a.net?parseFloat(a.net):parseFloat(a.buyout)-parseFloat(a.buyin),r in t||(t[r]=0),t[r]+=o}return t}(e):"DonkHouse"===t&&(n=function(e){for(var t=e.data,n={},a=1;a<t.length;a++){var r=t[a],o=r[Object.keys(r)[0]];if(""===o||"End time:"===o)return n;var s=r.__parsed_extra,i=Object(k.a)(s,5),c=(i[0],i[1],i[2]),l=(i[3],i[4]);n[l.length>0&&"None provided"!==l?l:o]=parseFloat(c)}return n}(e));for(var a=[],r=[],o=0,s=0,i=Object.keys(n);s<i.length;s++){var c=i[s],l=c,u=n[c],d=[l,u];u<0?a.push(d):r.push(d),o+=u}0!==o&&alert("Net total is off by ".concat(o));var b=new B.a((function(e,t){return e[1]-t[1]}));b.init(a);var j=new B.a((function(e,t){return t[1]-e[1]}));j.init(r);for(var m=[];b.size()>0&&j.size()>0;){var h={Winner:"",Loser:"",Amount:""},p=b.poll(),y=j.poll();h.Winner=y[0],h.Loser=p[0];var O=y[1]+p[1];O<0&&(h.Amount=y[1],b.add([p[0],O])),O>0?(h.Amount=-p[1],j.add([y[0],O])):h.Amount=y[1],m.push(h)}return{payouts:m,playerNets:n}},S=function(e){var t=function(e){if(Array.isArray(e))return"FormEntry";if("object"===typeof e){var t=e.data[0];if(Object.keys(t).some((function(e){return/Most recent sessions as of/.test(e)})))return"DonkHouse";if("buy_in"in t&&"buy_out"in t&&"net"in t&&"player_id"in t&&"player_nickname"in t&&"session_end_at"in t&&"session_start_at"in t&&"stack"in t)return"PokerNow"}alert("Invalid data source - check that the file is the original export!")}(e);return E(e,t)},P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={},a.handleFileChange=function(e){e.length>0&&m.a.parse(e[0],{header:!0,complete:function(e){var t=S(e);a.setState({processedData:t})}})},a.handleFormEntry=function(e){var t=S(e);a.setState({processedData:t})},a.state={processedData:{payouts:[{Winner:"Won68",Loser:"Lost69",Amount:68},{Winner:"Won1",Loser:"Lost69",Amount:1}],playerNets:{Lost69:-69,Won68:68,Won1:1}}},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:b.a.Body,children:[Object(x.jsx)("h1",{children:"Poker Payments"}),Object(x.jsx)("div",{className:b.a.SubmitContainer,children:Object(x.jsx)(f,{handleFileChange:this.handleFileChange})}),Object(x.jsx)("div",{className:b.a.TableContainer,children:Object(x.jsx)(w,{handleFormEntry:this.handleFormEntry})}),Object(x.jsx)("h2",{children:"Payments"}),Object(x.jsx)("div",{className:b.a.ResultsTable,children:Object(x.jsx)(g,{data:this.state.processedData})})]})}}]),n}(r.a.Component);s.a.render(Object(x.jsx)(P,{}),document.getElementById("root"))},15:function(e,t,n){e.exports={DataTable:"FormEntry_DataTable__1_ytq",TableHead:"FormEntry_TableHead__3ahv6",TableNumber:"FormEntry_TableNumber__3V3Oy",TableName:"FormEntry_TableName__2GlTS",InputBox:"FormEntry_InputBox__2GI1Y",addButton:"FormEntry_addButton__3RZPx",deleteRow:"FormEntry_deleteRow__3qx7X",submitForm:"FormEntry_submitForm__2El8v",PeopleAdd:"FormEntry_PeopleAdd__2wRm_"}},36:function(e,t,n){e.exports={SubmitContainer:"App_SubmitContainer__1B5DM",TableContainer:"App_TableContainer__2b5u9"}},42:function(e,t,n){},67:function(e,t,n){e.exports={DropzoneAreaContainer:"FileSubmit_DropzoneAreaContainer__3mwDz"}}},[[104,1,2]]]);
//# sourceMappingURL=main.e875a478.chunk.js.map